name: Validate PR Documentation

on:
  pull_request:
    types: [opened, edited, synchronize]

jobs:
  validate-pr-docs:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Validate PR Documentation Checkboxes
        run: |
          echo "üîç Validating PR description..."
          BODY=$(jq -r '.pull_request.body' "$GITHUB_EVENT_PATH")
          echo "PR Body:"
          echo "$BODY"
          echo "--------------------------"

          # Look for checked boxes [x] for Frontend, Backend, or Both
          if echo "$BODY" | grep -qiE "(\*\*\s*\[\s*x\s*\]\s*Frontend|\*\*\s*\[\s*x\s*\]\s*Backend|\*\*\s*\[\s*x\s*\]\s*Both)"; then
            echo "‚úÖ At least one checkbox (Frontend/Backend/Both) is checked. Validation passed."
          else
            echo "‚ùå Validation failed: Please check at least one PR type checkbox (Frontend, Backend, or Both) before merging."
            exit 1
          fi
